<!DOCTYPE html><html lang="vi"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"        /><meta http-equiv="X-UA-Compatible" content="ie=edge" /><meta name="robots" content="noodp,index,follow" /><meta name="theme-color" content="#597484" /><meta name="revisit-after" content="1 days" /><meta name="google-site-verification" content="ZFrkEu3QMFl9Kz0JyK2SfzdIZ84lDgm9gLQ6J6FmAvg"        /><meta name="p:domain_verify" content="faa7b25edce176988fb8171e9457554a"        /><meta property="description" content="Có một request bị 404 lúc nào cũng xuất hiện nhưng không biết từ đâu. Hôm nay đã xác định được nguyên nhân và viết lại để nhớ." /><meta property="og:url" content="https://vhnam.github.io/tutorials/hom-nay-hoc-duoc-cach-debug-failed-request"        /><meta property="og:type" content="article" /><meta property="og:title" content="Hôm nay học được cách debug failed request" /><meta property="og:description" content="Có một request bị 404 lúc nào cũng xuất hiện nhưng không biết từ đâu. Hôm nay đã xác định được nguyên nhân và viết lại để nhớ." /><meta property="og:image" content="https://vhnam.github.io/src/assets/img/favicon.png"        /><meta property="og:locale" content="vi_VN" /><meta property="fb:app_id" content="2064203853819553" /><title>Hôm nay học được cách debug failed request | Nam Vo</title><link rel="shortcut icon" href="/src/assets/favicon.ico" type="image/x-icon"        /><link rel="canonical" href="https://vhnam.github.io" /><link rel="preconnect" href="https://fonts.googleapis.com/"            crossorigin        /><link as="style"            crossorigin rel="stylesheet preload prefetch" href="/src/assets/css/bootstrap.css"        /><link as="style"            crossorigin rel="stylesheet preload prefetch" href="/src/assets/css/theme.css"        /><link as="style"            crossorigin rel="stylesheet preload prefetch" href="/src/assets/css/pages/post.css"        /><!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--></head><body itemscope="itemscope" itemtype="https://schema.org/BlogPosting"><nav class="navbar navbar-expand-lg navbar-light sticky-top bg-light shadow"><div class="container"><a class="navbar-brand logo" href="/">Nam Vo</a><button class="navbar-toggler" type="button"                    data-toggle="collapse"                    data-target="#navbarNavDropdown"                    aria-controls="navbarNavDropdown"                    aria-expanded="false"                    aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavDropdown"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" id="blog" href="/blog">Nhật ký</a                            ></li><li class="nav-item"><a class="nav-link" id="tutorials" href="/tutorials">Chuyện ngành</a                            ></li><li class="nav-item"><a class="nav-link" id="portfolio" href="#">Portfolio</a                            ></li><li class="nav-item"><a class="nav-link" id="about" href="/about.html">Thông tin</a                            ></li><li class="nav-item"><a class="nav-link" id="contact" href="/contact.html">Liên lạc</a                            ></li></ul></div></div></nav><section class="content"><div class="container"><div class="row"><div class="col-lg-8"><div class="content__heading"><h1 class="content__title" itemprop="headline">                                Hôm nay học được cách debug failed request                            </h1><p class="content__time">Ngày 22 tháng 5 năm 2020</p><meta itemprop="author" content="Nam Vo" /><meta itemprop="datePublished" content="2020-05-22"                            /><meta itemprop="dateModified" content="2020-05-22"                            /><meta itemprop="mainEntityOfPage" content="Có một request bị 404 lúc nào cũng xuất hiện nhưng không biết từ đâu. Hôm nay đã xác định được nguyên nhân và viết lại để nhớ."                            /></div><p>  Có một request lúc nào cũng gửi đến  <code>https://&lt;DOMAIN&gt;/undefined</code>. Ban đầu, cứ nghĩ là lỗi do  <code>next/router</code> của Next.js. Hôm nay nhờ anh leader mà mình đã biết  được lỗi nó từ đâu ra. Hôm nay học được cách debug này nên viết bài luôn.</p><img alt="Failed request 404" itemprop="image" src="img/failed-request-404.png"/><span class="heading" id="cch-debug"></span><h2>Cách debug</h2><p>  Đầu tiên, ta quan sát icon của request có dấu hiệu bất thường. Hiện mình đang  dùng Chrome 81.</p><img alt="Failed request with status" itemprop="image" src="img/failed-request-with-status.png"/><p>  Bình tĩnh nào, thấy phần <strong>Initiator</strong> có chữ  <code>Parser</code>. Đoán là nó bị lỗi lúc nhận thông tin từ server để chuyển  đổi thành một dạng gì đó. Mò mò tiếp coi chỗ nào parse bị sai nè.</p><p>  Vì đây đang dùng server-side rendering, có thể sau khi JavaScript được tải  xuống thì nó render cái gì đó dẫn đến lỗi. Thử tắt JavaScript coi có gì xảy ra  không. Vào  <strong>Chrome Settings</strong> -&gt; <strong>Debugger</strong> -&gt;  <strong>Disable JavaScript</strong>. Và tải lại trang.</p><img alt="Failed request 404" itemprop="image" src="img/failed-request-404--new.png"/><p>  Oh, lần này ở phần <code>Name</code>, icon của hình ảnh bị lỗi hiện lên. Ta  khoanh vùng lại chỉ còn chỗ lấy hình của Carousel và danh sách trong slide bị  sai. Vậy thử search cây DOM trong phần <code>Elements</code> coi sao.</p><img alt="Finding in DOM" itemprop="image" src="img/finding-in-dom.jpg"/><p>  Cuối cùng nguyên nhân của mọi tội ác là nằm ở phần render cái Carousel. Do  mình dùng server-side rendering nên thấy được layout trước. Còn phần hình ảnh  thì sau khi lấy được data sẽ điền source vào chỗ trống rồi render sau. Nên ở  bước này, ở carousel không nhận được link hình ở trong  <code>background-image</code> nên báo lỗi.</p><span class="heading" id="lu-"></span><h2>Lưu ý</h2><p>  Có thể mặc định, trình duyệt của các bạn không thấy được chữ  <code>Parser</code> trong phần <code>Initiator</code>. Để bật lên thì bạn vào  Settings của DevTools, chọn <code>Use large request rows</code>.</p><img alt="DevTools settings" itemprop="image" src="img/settings.png"/><span class="heading" id="tng-kt"></span><h2>Tổng kết</h2><p>  Ở đây mình muốn rút ra là... khi có lỗi liên quan đến việc request bị tạch thì  bình tĩnh mà để ý cái icon của request là gì và Initiator. Nếu không ra thì  thử tắt JavaScript đi coi sao.</p><p>  Cảm ơn anh Vũ Nguyễn đã hỗ trợ debug để có được bài viết này.</p></div><div class="col-lg-4 pl-5"><ul class="content__index index" id="index"><ul><li><a id="prefix-cch-debug" href="#cch-debug" class="index__item index--highlight">Cách debug</a></li><li><a id="prefix-lu-" href="#lu-" class="index__item">Lưu ý</a></li><li><a id="prefix-tng-kt" href="#tng-kt" class="index__item">Tổng kết</a></li></ul></ul></div></div><div class="content__footer"><div class="social-plugin"><div class="like-share"><div class="fb-like"                                data-href="http://vhnam.github.io/tutorials/hom-nay-hoc-duoc-cach-debug-failed-request"                                data-layout="standard"                                data-action="like"                                data-show-faces="true"                                data-share="true"></div><div class="mt-3"><a href="https://twitter.com/share" class="twitter-share-button"                                    {count}                                    data-url="http://vhnam.github.io/tutorials/hom-nay-hoc-duoc-cach-debug-failed-request"                                    data-via="vhnam2504">Tweet</a                                ></div></div><div class="comments"><div class="fb-comments"                                data-href="http://vhnam.github.io/tutorials/hom-nay-hoc-duoc-cach-debug-failed-request"                                data-numposts="10"></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="d-flex justify-content-center align-items-center text-white py-3">                    &copy; <span class="mx-1" id="footer-year"></span> Nam Vo's                    blog                </div></div></footer><script src="/src/assets/js/dist/bundle.js"></script><script src="/src/assets/js/post.js"></script><script>            (function (d,s,id) {var js,                    fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)) return;js=d.createElement(s);js.id=id;js.src =                    "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";fjs.parentNode.insertBefore(js,fjs);})(document, "script", "facebook-jssdk");</script><script>            !(function (d,s,id) {var js,                    fjs=d.getElementsByTagName(s)[0],                    p = /^http:/.test(d.location) ? "http" : "https";if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p + "://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}})(document, "script", "twitter-wjs");</script><script>            window.fbAsyncInit=function(){FB.init({appId: "2064203853819553",                    xfbml: true,                    version: "v7.0",});FB.AppEvents.logPageView();};(function (d,s,id) {var js,                    fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return;}                js=d.createElement(s);js.id=id;js.src = "https://connect.facebook.net/en_US/sdk.js";fjs.parentNode.insertBefore(js,fjs);})(document, "script", "facebook-jssdk");</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-66016963-1"></script><script>            window.dataLayer=window.dataLayer || [];function gtag(){dataLayer.push(arguments);}            gtag("js", new Date());gtag("config", "UA-66016963-1");</script></body></html>