<!DOCTYPE html><html lang="vi"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"        /><meta http-equiv="X-UA-Compatible" content="ie=edge" /><meta name="robots" content="noodp,index,follow" /><meta name="theme-color" content="#597484" /><meta name="revisit-after" content="1 days" /><meta name="google-site-verification" content="ZFrkEu3QMFl9Kz0JyK2SfzdIZ84lDgm9gLQ6J6FmAvg"        /><meta name="p:domain_verify" content="faa7b25edce176988fb8171e9457554a"        /><meta property="description" content="Ghi chú lại cách cấu hình biến môi trường và mã hoá chúng." /><meta property="og:url" content="https://vhnam.github.io/tutorials/cau-hinh-bien-moi-truong-tren-travis-ci"        /><meta property="og:type" content="article" /><meta property="og:title" content="Cấu hình biến môi trường trên Travis CI" /><meta property="og:description" content="Ghi chú lại cách cấu hình biến môi trường và mã hoá chúng." /><meta property="og:image" content="https://vhnam.github.io/src/assets/img/favicon.png"        /><meta property="og:locale" content="vi_VN" /><meta property="fb:app_id" content="2064203853819553" /><title>Cấu hình biến môi trường trên Travis CI | Nam Vo</title><link rel="shortcut icon" href="/src/assets/favicon.ico" type="image/x-icon"        /><link rel="canonical" href="https://vhnam.github.io" /><link rel="preconnect" href="https://fonts.googleapis.com/"            crossorigin        /><link as="style"            crossorigin rel="stylesheet preload prefetch" href="/src/assets/css/bootstrap.css"        /><link as="style"            crossorigin rel="stylesheet preload prefetch" href="/src/assets/css/theme.css"        /><link as="style"            crossorigin rel="stylesheet preload prefetch" href="/src/assets/css/pages/post.css"        /><!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--></head><body itemscope="itemscope" itemtype="https://schema.org/BlogPosting"><nav class="navbar navbar-expand-lg navbar-light sticky-top bg-light shadow"><div class="container"><a class="navbar-brand logo" href="/">Nam Vo</a><button class="navbar-toggler" type="button"                    data-toggle="collapse"                    data-target="#navbarNavDropdown"                    aria-controls="navbarNavDropdown"                    aria-expanded="false"                    aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavDropdown"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" id="blog" href="/blog">Nhật ký</a                            ></li><li class="nav-item"><a class="nav-link" id="tutorials" href="/tutorials">Chuyện ngành</a                            ></li><li class="nav-item"><a class="nav-link" id="portfolio" href="#">Portfolio</a                            ></li><li class="nav-item"><a class="nav-link" id="about" href="/about.html">Thông tin</a                            ></li><li class="nav-item"><a class="nav-link" id="contact" href="/contact.html">Liên lạc</a                            ></li></ul></div></div></nav><section class="content"><div class="container"><div class="row"><div class="col-lg-8"><div class="content__heading"><h1 class="content__title" itemprop="headline">                                Cấu hình biến môi trường trên Travis CI                            </h1><p class="content__time">Ngày 24 tháng 5 năm 2020</p><meta itemprop="author" content="Nam Vo" /><meta itemprop="datePublished" content="2020-05-24"                            /><meta itemprop="dateModified" content="2020-05-24"                            /><meta itemprop="mainEntityOfPage" content="Ghi chú lại cách cấu hình biến môi trường và mã hoá chúng."                            /></div><p>  Có một dự án mình có nhu cầu dùng Travis CI để build tự động qua bên Amazon  Web Services. Trong lúc build, cần dùng  <code>Environment Variables</code> (biến môi trường) và mình viết bài này để  ghi chú lại các thao tác.</p><img alt="CI-CD" itemprop="image" src="img/ci-cd.png"/><span class="heading" id="to-bin-mi-trng-trn-travis-ci"></span><h2>Tạo biến môi trường trên Travis CI</h2><p>  Đầu tiên, bạn vào project cần cấu hình, chọn <code>Settings</code>, kéo xuống  phần <code>Environment Variables</code>.</p><img alt="Environment Variables" itemprop="image" src="img/environment-variables.png"/><p>  Tiếp theo, bạn điền tên biến vào <code>NAME</code> và giá trị vào  <code>VALUE</code>. Nếu bạn chỉ muốn biến đó chỉ sử dụng cho một nhánh nào đó  thì chọn tên nhánh ở phần <code>BRANCH</code>, không thì chọn  <strong>All branches</strong>. Và nhấn <code>ADD</code>.</p><p>  Lưu ý một chút, nếu bạn tạo tên biến bằng cách này thì bạn vẫn thấy được giá  trị khi vào Travis Settings.</p><span class="heading" id="m-ho-bin-mi-trng"></span><h2>Mã hoá biến môi trường</h2><p>  Với cách này, không ai đọc được value và có thể tạo/xoá/sửa biến ở local,  không nhất thiết phải vào web.</p><p>  Đầu tiên là bạn phải tạo fle <code>.travis.yml</code> đặt ở thư mục root của  project.</p><img alt="Structure" itemprop="image" src="img/structure-folder.png" style="width: 15rem;"/><p>  Tiếp theo, bạn cần cài đặt Travis CLI tại máy thông qua lệnh sau:</p><script src="https://gist.github.com/vhnam/b1c04d3746e9fe5966477efe2692d286.js"></script><p>  Sau đó cần phải đăng nhập để có thể sử dụng, bạn gõ  <code>travis login</code> (dành cho  <a href="https://travis-ci.org">travis-ci.org</a>) hoặc  <code>travis login --pro</code> (dành cho  <a href="https://travis-ci.com">travis-ci.com</a>). Mình dùng tài khoản GitHub  (username + mất khẩu) và nhập GitHub Token (nếu có cài đặt) là đăng nhập được.</p><p>  Với cách này, mình sẽ mã hoá từng biến, tức là có 5 biến thì nhập 5 lần nhé.</p><script src="https://gist.github.com/vhnam/e11ed810294185c722f2050eb46e9683.js"></script><p>  Và đây là kết quả.</p><img alt="Encrypted keys" itemprop="image" src="img/encrypted-keys.png" style="width: 15rem;"/><span class="heading" id="tham-kho"></span><h2>Tham khảo</h2><ul class="reference"><li>    Travis CI,    <a href="https://docs.travis-ci.com/user/environment-variables" itemprop="url">Environment Variables</a></li><li>    Travis CI,    <a href="https://docs.travis-ci.com/user/encryption-keys#usage" itemprop="url">Encryption keys</a></li></ul></div><div class="col-lg-4 pl-5"><ul class="content__index index" id="index"><ul><li><a id="prefix-to-bin-mi-trng-trn-travis-ci" href="#to-bin-mi-trng-trn-travis-ci" class="index__item index--highlight">Tạo biến môi trường trên Travis CI</a></li><li><a id="prefix-m-ho-bin-mi-trng" href="#m-ho-bin-mi-trng" class="index__item">Mã hoá biến môi trường</a></li><li><a id="prefix-tham-kho" href="#tham-kho" class="index__item">Tham khảo</a></li></ul></ul></div></div><div class="content__footer"><div class="social-plugin"><div class="like-share"><div class="fb-like"                                data-href="http://vhnam.github.io/tutorials/cau-hinh-bien-moi-truong-tren-travis-ci"                                data-layout="standard"                                data-action="like"                                data-show-faces="true"                                data-share="true"></div><div class="mt-3"><a href="https://twitter.com/share" class="twitter-share-button"                                    {count}                                    data-url="http://vhnam.github.io/tutorials/cau-hinh-bien-moi-truong-tren-travis-ci"                                    data-via="vhnam2504">Tweet</a                                ></div></div><div class="comments"><div class="fb-comments"                                data-href="http://vhnam.github.io/tutorials/cau-hinh-bien-moi-truong-tren-travis-ci"                                data-numposts="10"></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="d-flex justify-content-center align-items-center text-white py-3">                    &copy; <span class="mx-1" id="footer-year"></span> Nam Vo's                    blog                </div></div></footer><script src="/src/assets/js/dist/bundle.js"></script><script src="/src/assets/js/post.js"></script><script>            (function (d,s,id) {var js,                    fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)) return;js=d.createElement(s);js.id=id;js.src =                    "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";fjs.parentNode.insertBefore(js,fjs);})(document, "script", "facebook-jssdk");</script><script>            !(function (d,s,id) {var js,                    fjs=d.getElementsByTagName(s)[0],                    p = /^http:/.test(d.location) ? "http" : "https";if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p + "://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}})(document, "script", "twitter-wjs");</script><script>            window.fbAsyncInit=function(){FB.init({appId: "2064203853819553",                    xfbml: true,                    version: "v7.0",});FB.AppEvents.logPageView();};(function (d,s,id) {var js,                    fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return;}                js=d.createElement(s);js.id=id;js.src = "https://connect.facebook.net/en_US/sdk.js";fjs.parentNode.insertBefore(js,fjs);})(document, "script", "facebook-jssdk");</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-66016963-1"></script><script>            window.dataLayer=window.dataLayer || [];function gtag(){dataLayer.push(arguments);}            gtag("js", new Date());gtag("config", "UA-66016963-1");</script></body></html>