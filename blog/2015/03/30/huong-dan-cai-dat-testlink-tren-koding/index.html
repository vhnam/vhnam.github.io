<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="description" content="Software Engineering">
		<title>Hướng dẫn cài đặt TestLink trên Koding</title>
		<link href="/public/img/favicon.png" rel="shortcut icon">
		<link rel="stylesheet" href="/public/css/bootstrap.css">
		<link rel="stylesheet" href="/public/css/bootstrap-theme.css">
		<link rel="stylesheet" href="/public/css/style.css">
		<link href="http://fonts.googleapis.com/css?family=Open+Sans&amp;subset=latin,vietnamese" rel="stylesheet" type="text/css">
	</head>
	<body>
		<div>
			<header>
				<img class="header-logo" src="/public/img/logo.png" alt="Logo">
				<h1 class="header-brand" title="Công nghệ phần mềm">
					<a href="/">Software Engineering</a>
				</h1>
				<nav>
					<ul class="nav header-index">
						<li>
							<a href="/">Blog</a>
						</li>
						<li>
							<a href="/index">Index</a>
						</li>
						<li>
							<a href="/about">About</a>
						</li>
					</ul>
				</nav>
				<nav class="nav-contact">
					<div>
						<a href="https://github.com/vhnam">
							<img title="Github" src="/public/img/github.png" alt="Github">
						</a>
						<a href="https://www.linkedin.com/in/namvh">
							<img title="LinkedIn" src="/public/img/linkedin.png" alt="LinkedIn">
						</a>
					</div>
				</nav>
			</header>
			<section class="content">
				<h2 class="post-title">Hướng dẫn cài đặt TestLink trên Koding</h2>
				<div class="post-content">
					Mới lúc sáng, thầy yêu cầu tụi mình cài đặt TestLink và BugZilla trên một host nào đó. Sẵn tiện có Koding.io, nó cho miễn phí máy với 3GB ổ cứng, 1GB RAM chạy hệ điều hành Ubuntu nên đẩy lên đây cho tiện. Nếu có hư, dễ dàng cài đặt lại.
					<article>
						<h3>Cấu hình Koding</h3>
						<p>
							Bạn vào trang <a href="https://koding.com/">https://koding.com/</a>. Tại đây, bạn có 2 cách để có thể đăng nhập.
							<ul>
								<li>Nhập <strong>Username</strong> và <strong>Password</strong> rồi nhấn <strong>Sign up</strong>.</li>
								<li>Đăng nhập bằng tài khoản <strong>GitHub</strong>.</li>
							</ul>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/koding-index.png" alt="Koding Index">
						</p>
						<p>
							Đây là màn hình sau khi đăng nhập. Gồm 4 phần chính.
							<ul>
								<li>Bảng điều khiển.</li>
								<li>Cây thư mục.</li>
								<li>Tab màn hình Console.</li>
								<li>Tab màn hình mở file dạng text.</li>
							</ul>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/index.png" alt="Index">
						</p>
						<p>
							Mặc định, ổ cứng đã sử dụng 57% do cài đặt sẵn môi trường để phát triển Go, Python, Ruby, PHP, Perl, C/C++, Java, MySQL, MongoDB,... Do đó, ta sẽ chạy lệnh để dọn bớt những thứ không cần thiết.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/disk-storage.png" alt="Disk Storage">
						</p>
						<p>
							Bạn chạy lệnh dưới đây để xóa những thứ không cần thiết. Và đã giảm xuống còn 39%.<br>
							<code>sudo apt-get -y --force-yes autoremove java* apache2* apache2-* vim-* golang-* cpp-* ftp</code><br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/remove-services.png" alt="Remove services">
						</p>
					</article>
					<article>
						<h3>Cài đặt MySQL</h3>
						<p>
							Trước khi cài, ta cần phải update. Ta gõ lệnh <code>sudo apt-get update</code>. Nếu các bạn muốn copy/paste thì chuột phải vào Terminal sẽ hiện ra menu lệnh. Máy chủ của Koding đã ở Mỹ nên việc chạy lệnh sẽ rất nhanh.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/update.png" alt="sudo apt-get update"><br>
						</p>
						<p>
							 Sau đó, ta gõ tiếp lệnh <code>sudo apt-get install mysql-server mysql-common mysql-client</code> để cài đặt MySQL. Lưu ý là trong quá trình cài đặt, sẽ có bước hỏi Yes/No, bạn nhớ gõ <strong>y</strong> và nhấn <strong>Enter</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/install-mysql.png" alt="Install MySQL">
						</p>
						<p>
							Bước này, bạn nhập mật khẩu của <strong>root</strong> user trong MySQL. Sau khi nhập xong, nhớ bấm nút mũi tên xuống trên bàn phím.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/root-password.png" alt="MySQL Root user passphrase">
						</p>
						<p>
							Xác nhận lại mật khẩu.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/confirm-password.png" alt="Confirm MySQL Root user passphrase">
						</p>
						<p>
							Như vậy, ta đã cài đặt xong <strong>MySQL</strong>, ta có thể kiểm tra đã chạy hay chưa bằng cách gõ lệnh <code>sudo netstat -tupln</code>. Ta thấy <strong>MySQL</strong> đã chạy ở port <strong>3306</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/check-mysql.png" alt="Check MySQL Service">
						</p>
						<p>
							Hoặc kiểm tra bằng cách vào <strong>MySQL</strong> với lệnh <code>mysql -u root -p</code> rồi nhập password đã tạo lúc nãy. Để thoát thì ta nhấn tổ hợp phím <code>Ctrl + C</code>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/login-mysql.png" alt="Login MySQL">
						</p>
					</article>
					<article>
						<h3>Cài PHPMyAdmin</h3>
						<p>
							Để sử dụng <strong>MySQL</strong> thuận tiện, ta sử dụng <strong>PHPMyAdmin</strong>. Ta gõ lệnh <code>sudo apt-get install phpmyadmin</code> để cài đặt.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/install-phpmyadmin.png" alt="Install PHPMyAdmin">
						</p>
						<p>
							Trong lúc cài, có hỏi Yes/No thì gõ <strong>y</strong> và nhấn <strong>Enter</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/installing-phpmyadmin.png" alt="Install PHPMyAdmin">
						</p>
						<p>
							Bước này, nó hỏi mình muốn sử dụng Web Server nào thì bạn chọn <strong>Apache2</strong>. Sau đó, nhấn <strong>Enter</strong> để xác nhận.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/choose-web-server.png" alt="Choose Web Server">
						</p>
						<p>
							Bấm mũi tên qua phải trên bàn phím rồi nhấn <strong>Enter</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/choose-option.png" alt="Choose Option">
						</p>
						<p>
							Chọn <strong>Yes</strong> để sử dụng <strong>dbconfig-common</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/dbconfig-common.png" alt="Using dbconfig-common">
						</p>
						<p>
							Nhập mật khẩu của <strong>MySQL</strong> lúc nãy đã tạo. Sau đó, nhấn phím mũi tên xuống để chọn <strong>OK</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/create-database-and-user.png" alt="Create database and user">
						</p>
						<p>
							Bước này bạn có thể bỏ qua nhưng <strong>PHPMyAdmin</strong> sẽ sinh mật khẩu tự động, thôi thì ta gõ lại mật khẩu lúc nãy cho chắc ăn.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/password-for-phpmyadmin.png" alt="Password for PHPMyAdmin">
						</p>
						<p>
							Xác nhận lại mật khẩu.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/password-confirm.png" alt="Password Confirmation">
						</p>
						<p>
							Tiếp theo, ta chỉnh sửa file cấu hình <strong>Apache2</strong> bằng cách gõ lệnh <code>sudo nano /etc/apache2/apache2.conf</code>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/open-apache2.conf.png" alt="Open apache2.conf">
						</p>
						<p>
							Bấm nút mũi tên xuống để di chuyển con trỏ chuột xuống phía dưới cùng của file, ta thêm dòng <code>Include /etc/phpmyadmin/apache.conf</code>. Nhấn <code>Ctrl + X</code> rồi gõ chữ <strong>y</strong> và nhấn <strong>Enter</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/add-command.png" alt="Add command">
						</p>
						<p>
							Kích hoạt phần mở rộng <strong>mcrypt</strong>, gõ lệnh <code>sudo php5enmod mcrypt</code>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/enable-mcrypt.png" alt="Enable mcrypt">
						</p>
						<p>
							Cuối cùng, khởi động lại Apache2 với lệnh <code>sudo service apache2 restart</code>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/restart-apache2.png" alt="Restart Apache2">
						</p>
						<p>
							Bạn vào địa chỉ <code>http://KODING_USERNAME.koding.io/phpmyadmin</code>. Cụ thể, địa chỉ của mình là <a href="http://vhnam.koding.io/phpmyadmin/">http://vhnam.koding.io/phpmyadmin/</a><br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/welcome-phpmyadmin.png" alt="Welcome to PHPMyAdmin">
						</p>
					</article>
					<article>
						<h3>Cài đặt TestLink</h3>
						<p>
							Đầu tiên, bạn vào trang <a href="https://github.com/TestLinkOpenSourceTRMS/testlink-code/tree/master">https://github.com/TestLinkOpenSourceTRMS/testlink-code/tree/master</a>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/testlink-github.png" alt="TestLink on GitHub">
						</p>
						<p>
							Tại mục <strong>clone URL</strong>, bạn nhấn vào <strong>HTTPS</strong> hoặc <strong>SSH</strong> (nếu đã cài đặt). Bạn copy đường dẫn đó.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/clone-url.png" alt="Clone URL">
						</p>
						<p>
							Sau đó chuyển sang <strong>Koding</strong>, tại thư mục <code>/home/KODING_USERNAME/Web</code>, ta gõ lệnh <code>git clone &lt;Clone URL&gt;</code>. Vì mặc định, <strong>Koding</strong> chọn thư mục này để public ra Internet.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/clone-testlink.png" alt="Clone TestLink">
						</p>
						<p>
							Khi clone thành công, tại thư mục <code>/home/KODING_USERNAME/Web</code> sẽ xuất hiện thư mục <strong>testlink-code</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/clone-successfully.png" alt="Clone Successfully">
						</p>
						<p>
							Bạn vào trình duyệt, gõ đường dẫn <code>http://KODING_USERNAME.koding.io/testlink-code</code> để vào <strong>TestLink</strong>. Cụ thể của mình là <a href="http://vhnam.koding.io/testlink-code">http://vhnam.koding.io/testlink-code</a>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/installation-testlink.png" alt="Installation">
						</p>
						<p>
							Trở lại <strong>PHPMyAdmin</strong>, bạn tạo một database mới tên là <strong>testlink</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/create-new-database.png" alt="Create new database">
						</p>
						<p>
							Vào database vừa mới tạo, chọn thẻ <strong>Privileges</strong>, chọn <strong>Add user</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/add-user.png" alt="Add user">
						</p>
						<p>
							Điền đầy đủ thông tin, ở mục <strong>Global privileges</strong> ta nhấn vào <strong>Check All</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/fill-information.png" alt="Fill information">
						</p>
						<p>
							Tạo tài khoản thành công.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/create-successfully.png" alt="Create Successfully">
						</p>
						<p>
							Vào thư mục <span class="post-url">testlink-code</span>, ta gõ lệnh <code>sudo chmod a+w testlink-code</code> để tạo quyền ghi (Write) cho thư mục <strong>testlink-code</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/set-permission-testlink.png" alt="testlink-code - Set permission">
						</p>
						<p>
							Quay trở lại trang <code>http://KODING_USERNAME.koding.io/testlink-code</code>, ta nhấn <strong>New Installation</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/acceptance-of-license.png" alt="Acceptance Of License">
						</p>
						<p>
							Chọn vào ô <strong>"I agree to the terms set out in this license."</strong> rồi nhấn <strong>continue</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/set-permission.png" alt="Set Read/Write Permission">
						</p>
						<p>
							Tại bước này, có 3 chỗ báo <strong>Failed</strong> và bạn cần fix nó. Đầu tiên, bạn vào thư mục <span class="post-url">testlink-code/gui</span> sẽ thấy thư mục <strong>templates_c</strong> chưa có quyền ghi (<strong>Write</strong>).<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/templates_c.png" alt="templates_c - No Write permission">
						</p>
						<p>
							Bạn gõ <code>sudo chmod a+w templates_c</code> để thư mục này có quyền ghi. Lúc này nó sẽ giống như bạn set full quyền (Read/Write/Execute - 777).<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/templates_c-set-write.png" alt="templates_c - Set Write permission">
						</p>
						<p>
							Quay trở lại trang <strong>TestLink</strong>, ta thấy chỉ còn 2 chỗ báo <strong>Failed</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/templates_c_set_permission_successfully.png" alt="templates_c - Set Write permission successfully">
						</p>
						<p>
							Tiếp theo, bạn mở file <strong>config.inc.php</strong> trong thư mục <strong>testlink-code</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/config.inc.php.png" alt="config.inc.php">
						</p>
						<p>
							Tại tại <strong>dòng 188</strong>, bạn sửa <code>$tlCfg->log_path = '/var/testlink/logs/';</code> thành <code>$tlCfg->log_path = '/home/KODING_USERNAME/Web/testlink-code/logs/';</code> và nhấn <strong>Ctrl + S</strong> để save.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/log_path.png" alt="set $log_path">
						</p>
						<p>
							Quay trở lại <strong>TestLink</strong>, ta thấy xuất hiện thêm mội lỗi nữa đó là thư mục lúc <strong>logs</strong> của chúng ta chưa có quyền ghi (Write).<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/logs_no-write-permission.png" alt="logs - no write permission">
						</p>
						<p>
							Ta vào thư mục <span class="post-url">testlink-code</span>, ta gõ lệnh <code>sudo chmod a+w logs</code> để set quyền ghi (Write) cho thư mục <strong>logs</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/logs_set-permission.png" alt="logs - set write permission">
						</p>
						<p>
							Lúc nãy, thư mục <span class="post-url">testlink-code/logs</span> đã có quyền ghi (Write).<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/logs_set-permission-successfully.png" alt="logs - set write permission successfully">
						</p>
						<p>
							Bây giờ, ta sẽ sửa lại đường dẫn của thư mục <strong>upload_area</strong> file <strong>config.ing.php</strong>. Ta sẽ sửa <strong>dòng 1082</strong> <code>$g_repositoryPath = '/var/testlink/upload_area/';</code> thành <code>$g_repositoryPath = '/home/KODING_USERNAME/Web/testlink-code/upload_area/';</code> và nhấn <strong>Ctrl + S</strong> để save.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/upload_area-set-variable.png" alt="upload_are - Set variable">
						</p>
						<p>
							Ta tiếp tục vào thư mục <span class="post-url">testlink-code</span> gõ lệnh <code>sudo chmod a+w upload_area</code> để set quyền ghi cho nó.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/upload_area-set-permission.png" alt="upload_are - Set permission">
						</p>
						<p>
							Tiếp tục gõ lệnh <code>sudo chmod a+w config.inc.php</code> cho để tạo quyền ghi (Write) cho file <strong>config.inc.php</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/config.inc.php_set-permission.png" alt="config.inc.php - Set permission">
						</p>
						<p>
							Quay trở lại trang <strong>TestLink</strong>, ta thấy mọi thứ đã <strong>OK</strong>, ta nhấn nút <strong>Continue</strong> để tiếp tục.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/verification-system-successfully.png" alt="Verification System successfully">
						</p>
						<p>
							Mục <strong>Database Type</strong> ta chọn loại cơ sở dữ liệu là <strong>MySQL (5.0.3 and later)</strong>, <strong>PostgreSQL (8.0 and later)</strong> hay <strong>Microsoft SQL Server 2005/2008 (Experimental)</strong>. Mục <strong>Database name</strong> là tên của database mà <strong>TestLink</strong> sẽ dùng để lưu dữ liệu trong quá trình hoạt động, tức là cái database lúc nãy mà ta đã tạo. Mục <strong>Table prefix</strong> thì bạn nên để trống.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/config-database.png" alt="Config database">
						</p>
						<p>
							Còn mục <strong>Database admin login</strong> và <strong>Database admin password</strong> chính là tài khoàn bạn đã tạo lúc nãy để đăng nhập <strong>PHPMyAdmin</strong>. Còn <strong>TestLink DB login</strong> và <strong>TestLink DB password</strong> là tài khoản đã tạo trong mục <strong>Privileges</strong> của <strong>PHPMyAdmin</strong> lúc nãy. Nhấn <strong>Process TestLink Setup!</strong> và ngồi chờ.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/config-account.png" alt="Config accounts">
						</p>
						<p>
							Thông báo cái đặt thành công hiện ra.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/setup-successfully.png" alt="Setup successfully">
						</p>
						<p>
							Ta truy cập vào đường dẫn <code>http://KODING_USERNAME.koding.io/testlink-code</code> để đăng nhập với username là <strong>admin</strong> và passoword là <strong>admin</strong>.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/TestLink-login.png" alt="Login">
						</p>
					</article>
					<article>
						<h3>Lưu ý</h3>
						<p>
							Nếu bạn không vào trang <strong>Koding</strong> với đường dẫn <code>http://KODING_USERNAME.koding.io</code> được thì bạn di chuyển chuột vào chữ <strong>koding-vm-0</strong>, có một vòng tròn màu trắng hiện lên, nhấn vào sẽ hiện thông tin của máy hiện tại. Bạn dùng địa chỉ tại <strong>Assigned URL</strong> gồm <code>KODING_ID.KODING_USERNAME.koding.io</code> để truy cập.<br>
							<img src="/blog/2015/03/30/huong-dan-cai-dat-testlink-tren-koding/img/koding-info.png" alt="Koding info">
						</p>
					</article>
				</div>
				<div class="post-time">
					Last Modified: 11:52 PM - Saturday, April 4, 2015
				</div>
			</section>
		</div>

		<div class="widget">
			<div class="widget-top">
				<span class="glyphicon glyphicon-chevron-up"></span>
			</div>
			<div class="widget-index" title="Mục lục">
				<a href="/index">
					<span class="glyphicon glyphicon-list-alt"></span> Index
				</a>
			</div>
		</div>

		<script src="/public/js/jquery.js"></script>
		<script src="/public/js/script.js"></script>
	</body>
</html>