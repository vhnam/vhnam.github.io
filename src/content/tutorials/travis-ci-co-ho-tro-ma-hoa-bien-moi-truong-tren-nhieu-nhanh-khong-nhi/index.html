<p>
  Số là một ngày đẹp trời, mạng ở VN quá chậm để kéo file lên
  <a href="https://aws.amazon.com/s3/" itemprop="url">Amazon S3</a>. Kéo tầm
  22.5MB lên, được tầm 30% là nó rớt. Và thế là phải cấu hình thêm CI/CD cho
  nhánh này.
</p>
<p>
  Nói sơ một xíu, lúc trước mình đã cấu hình cho nhánh <code>develop</code> rồi
  nhưng nhánh <code>staging</code> thỉnh thoảng mới deploy nên cho chạy bằng
  cơm. Và thế là mình tìm hiểu xem có cách nào để 2 nhánh dùng chung tên biến
  môi trường đã được mã hoá nhưng khác giá trị không?
</p>
<img src="img/travis-ci.png" alt="Travis CI" itemprop="image" />

<h2>Cách cấu hình trên web</h2>
<p>
  Bạn chỉ cần vào <code>Settings</code> của repository trên Travis và làm như
  hình.
</p>
<img
  src="img/settings-env-vars.png"
  alt="Settings Environment Variables"
  itemprop="image"
/>
<p>
  Bạn kéo xuống phần <code>Environment Variables</code>, điền tên biến, giá trị
  và chọn nhánh. Công việc hết sức dễ dàng.
</p>

<h2>Có cách nào chỉnh trong file .travis.yml không nhỉ?</h2>
<h3>Phương án 1</h3>
<p>
  Suy nghĩ xem có cách nào để cấu hình biến môi trường theo từng nhánh không?
  Tức là biến <code>NODE_ENV</code> ở nhánh <code>develop</code> thì nó sẽ mang
  giá trị là <strong>develop</strong>, còn ở nhánh <code>staging</code> thì giá
  trị là <strong>uat</strong>. Với điều kiện là phải mã hoá biến được.
</p>
<p>
  Sau một hồi tìm hiểu thì thấy viết kiểu này có vẻ chạy được, thử xem nào.
</p>
<img src="img/solution-1.png" alt="Solution 1" itemprop="image" />

<h2>Tham khảo</h2>
<ul class="reference">
  <li>
    Travis CI,
    <a
      itemprop="url"
      href="https://docs.travis-ci.com/user/environment-variables/"
      >Environment Variables</a
    >
  </li>
</ul>
