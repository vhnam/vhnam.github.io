<p>
    Chắc hẳn khi mọi người viết code đều dùng công cụ mặc định hoặc là dùng thư
    viện bên ngoài để format code. Trong đó có lẽ
    <a itemprop="url" href="https://prettier.io">Prettier</a> là các bạn dùng
    nhiều nhất. Bài viết hôm nay, mình sẽ chia sẻ với các bạn cách mình dùng
    Prettier.
</p>
<img src="img/prettier.png" alt="Prettier" itemprop="image" />

<h2>Code Formatter là gì?</h2>
<p>
    Phần này dành cho những bạn chưa biết, bạn thấy đoạn code dưới đây là code
    gốc.
</p>
<img src="img/code-before.png" alt="Before formatting" itemprop="image" />
<p>
    Và sau khi chạy, nó sẽ ngay hàng thẳng lối như thế này.
</p>
<img src="img/code-after.png" alt="After formatting" itemprop="image" />

<h2>Tích hợp với Visual Studio Code</h2>
<p>
    Mình thường code bằng VSCode. Bình thường các bạn có thể dùng công cụ Format
    Document được tích hợp sẵn bằng cách bấm tổ hợp
    <code>Command + Shift + F</code> (MacOS) hoặc là
    <code>Shift + Alt + F</code> (thế giới còn lại).
</p>
<p>
    Nếu bạn thích dùng Prettier thì bạn cứ vào phần <strong>Extension</strong>,
    gõ <code>Prettier</code> và chọn <strong>Prettier - Code formatter</strong>.
    Sau đó nhấn <strong>Install</strong>.
</p>
<img src="img/vsc-prettier.png" alt="Prettier in VSCode" itemprop="image" />
<p>
    Trong quá trình sử dụng lần đâu, có thể sẽ xảy ra tranh chấp giữa Formatter
    mặc định và Prettier. Bạn sẽ được hỏi như hình sau đây.
</p>
<img
    src="img/vsc-config-formatter.png"
    alt="Configuration Prettier"
    itemprop="image"
/>
<p>
    Sau đó bạn chọn Prettier hay cái khác.
</p>
<img
    src="img/vsc-choose-formatter.png"
    alt="Choose formatter"
    itemprop="image"
/>
<p>
    Nếu Visual Studio Code không có hỏi, bạn có thể vào
    <strong>Settings</strong>, gõ <code>Default Formatter</code> và chọn
    <strong>Default Formatter</strong> là <code>ebsenp.prettier-vscode</code>.
</p>
<img
    src="img/vsc-default-formatter.png"
    alt="Default formatter"
    itemprop="image"
/>

<h2>Cấu hình cho từng project</h2>
<p>
    Nếu bạn không thích dùng một cấu hình của Prettier cho tất cả project. Bạn
    có thể tạo file <code>.prettierrc</code> đặt ở thư mục root của Project. Ví
    dụ rule như vậy.
</p>
<script src="https://gist.github.com/vhnam/73eee9419830c06ece057f89eff8323a.js"></script>
<p>
    Với cách ở trên, bạn chỉ cấu hình cho 1 loại file nhưng sẽ ảnh hưởng loại
    khác. Như đoạn code cấu hình trên là dành cho JavaScript, nhưng HTML cũng bị
    ảnh hưởng theo. Bạn có thể tham khảo ở đây để cấu hình cho 2 loại file khác
    nhau.
</p>
<script src="https://gist.github.com/vhnam/bb51afa55033d474359aecfd082c2296.js"></script>

<h2>Cấu hình Pre-commit Hook</h2>
<p>
    Nếu bạn lười thì có thể trước khi commit, sẽ chạy một lượt bằng cách cấu
    hình pre-commit hook. Bạn có thể tham khảo ở
    <a itemprop="url" href="https://prettier.io/docs/en/precommit.html">đây</a>.
</p>
<p>
    Mình thì theo trường phái xài <code>pretty-quick</code>. Đầu tiên, bạn cài
    package sau.
</p>
<p>
    <code>
        yarn add pretty-quick husky --dev
    </code>
</p>
<p>
    Sau đó, bạn config phần hook ở trong file <code>package.json</code> như sau.
</p>
<img src="img/pre-commit-hook.png" alt="Pre-commit Hook" itemprop="image" />

<h2>Bỏ qua một số file</h2>
<p>
    Bạn cứ việc tạo file tên là <code>.prettierignore</code> đặt ở thư mục root
    của project là được. Về mặt cú pháp thì nó tương tự <code>.gitignore</code>
</p>
<script src="https://gist.github.com/vhnam/9a8172b1e3ca06584bb09c18bf131166.js"></script>

<h2>Tham khảo</h2>
<ul class="reference">
    <li>
        James Quick,
        <a
            itemprop="url"
            href="https://www.digitalocean.com/community/tutorials/how-to-format-code-with-prettier-in-visual-studio-code#:~:text=To%20open%20the%20command%20palette,and%20then%20choose%20Format%20Document.&text=Then%20choose%20Prettier%20%2D%20Code%20Formatter."
            >How To Format Code with Prettier in Visual Studio Code</a
        >
    </li>
</ul>
