<p>
    Lần trước, mình đã viết bài giới thiệu về kỹ thuật dùng hàm <a href="http://vhnam.github.io/blog/javascript-debounce-function-la-gi/" itemprop="url">Debounce</a>. Nếu bạn có đọc các link trong phần tham khảo, hẵn sẽ thấy có nhắc đến hàm <strong>throttle</strong>. Hôm nay, mình sẽ giới thiệu về hàm này.
</p>
<img alt="throttle()" itemprop="image" src="img/pendulum.png"/>
<span class="heading" id="bi-ton-t-ra"></span><h2>Bài toán đặt ra</h2>
<script src="https://gist.github.com/vhnam/c9c49d22580ea27a8ba5.js"></script>
<p>
    Mình xin dùng một ví dụ đơn giản, khi bạn rê chuột trong vùng màu xanh dưới đây, sẽ hiện thị số lần gọi sự kiện <code>hover()</code> được gọi.
</p>
<div class="block-blue" id="block-non-throttle">0</div>
<p>
    Bạn có thấy số lần gọi sự kiện <code>hover()</code> rất lớn không? Giả sử, bạn khi gọi hàm <code>resize()</code> để resize kích thước trình duyệt khi đang sử dụng trên mobile (có một số trường hợp thẻ <code><a href="http://www.w3.org/TR/css3-mediaqueries/" itemprop="url">@media</a></code> trong CSS3 không khả thi). Bạn nên nhớ rằng, để render giao diện thì cần trải qua 2 bước là xây dựng thông số và xử lý. Nếu bạn gọi hàm <code>resize()</code> với số lần như bạn đã làm ở ví dụ trên. Tự hỏi điện thoại nào chịu cho nổi?
</p>
<p>
    Lúc này, bạn nên sử dụng hàm <code>throttle()</code> để giải quyết vấn đề này.
</p>
<span class="heading" id="throttle-function"></span><h2>Throttle Function</h2>
<p>
    Cách sử dụng hàm <code>throttle()</code> cũng tương tự như hàm <code>debounce()</code> gồm có 2 tham số là hàm cần thực thi và thời gian delay. Và hàm này cũng cần trả về một hàm.
</p>
<script src="https://gist.github.com/vhnam/18fffc9976ed9587ada4.js"></script>
<p>
    Nếu hàm này không có đang chờ đợi gì thì cho nó chạy.
</p>
<script src="https://gist.github.com/vhnam/b960eb6920a083a4c32c.js"></script>
<p>
    Hình như có gì đó không ổn. Nó chỉ chạy được có mỗi một lần đầu thì phải? Ta phải chờ trong một khoảng thời gian <strong>time</strong> thôi. Chờ xong, nó sẽ thực thi tiếp. Ta phải sửa lại.
</p>
<script src="https://gist.github.com/vhnam/caa6cf5a6b12544a60cd.js"></script>
<p>
    Bây giờ, bạn thử rê chuột trong vùng màu xanh dưới đây. Phần xử lý đã sử dụng hàm <code>throttle()</code>.
</p>
<div class="block-blue" id="block-throttle">0</div>
<span class="heading" id="li-kt"></span><h2>Lời kết</h2>
<p>
    Để hiểu rõ về hàm này hơn, bạn có thể đọc mã nguồn của <a href="http://underscorejs.org/#debounce" itemprop="url">Underscore.js</a>, <a href="https://lodash.com/docs#debounce" itemprop="url">Lodash</a>. Bạn có thể tham khảo bài viết <a href="http://drupalmotion.com/article/debounce-and-throttle-visual-explanation" itemprop="url">Debounce and Throttle: a visual explanation</a> để hiểu rõ hơn. Vì họ có so sánh rõ ràng chức năng của hàm <code>debounce</code> và <code>throttle()</code>.
</p>
<span class="heading" id="tham-kho"></span><h2>Tham khảo</h2>
<ul class="reference">
<li>
<a href="http://sampsonblog.com/749/simple-throttle-function" itemprop="url">Simple Throttle Function</a>
</li>
<li>
<a href="https://remysharp.com/2010/07/21/throttling-function-calls" itemprop="url">Throttling function calls</a>
</li>
<li>
<a href="http://drupalmotion.com/article/debounce-and-throttle-visual-explanation" itemprop="url">Debounce and Throttle: a visual explanation</a>
</li>
</ul>
